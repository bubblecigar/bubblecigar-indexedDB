(this.webpackJsonpindexeddb=this.webpackJsonpindexeddb||[]).push([[0],{15:function(e,n,t){e.exports=t(24)},20:function(e,n,t){},21:function(e,n,t){},24:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),a=t(10),c=t.n(a),l=(t(20),t(8)),u=t(1),i=t(3),s=(t(21),t(2));function d(){var e=Object(u.a)(["\n  margin: 10px;\n  border: 1px solid black;\n  \n  > div {\n    padding: 8px;\n  }\n\n  > div:first-child {\n    background-color: ",";\n    color: white;\n  }\n"]);return d=function(){return e},e}function f(){var e=Object(u.a)(["\n  border: 1px solid black;\n  padding: 10px;\n  background-color: ",";\n  color: ",";\n"]);return f=function(){return e},e}function m(){var e=Object(u.a)(["\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: space-evenly;\n  align-items: center;\n  margin: 10px;\n  max-width: 100%;\n"]);return m=function(){return e},e}function p(){var e=Object(u.a)(["\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: center;\n  align-items: flex-end;\n  padding: 20px;\n  max-width: 100%;\n  background-color: ",";\n  color: white;\n  > span {\n    margin: 5px;\n    font-size: 30px;\n  }\n"]);return p=function(){return e},e}function b(){var e=Object(u.a)(["\n  padding: 5px;\n  border: 1px solid black;\n  background-color: ",";\n  color: ",";\n"]);return b=function(){return e},e}function g(){var e=Object(u.a)(["\n  margin: 10px;\n  border: 1px solid black;\n  position: relative;\n\n  &::after {\n    content: '';\n    width: 0px;\n    height: 0px;\n    border: 7px transparent solid;\n    border-left: 7px "," solid;\n    position: absolute;\n    left: calc(100% + 5px);\n    top: 50%;\n    transform: translateY(-50%);\n  }\n\n  &:last-child::after{\n    border-left: 7px transparent solid;\n  }\n"]);return g=function(){return e},e}function v(){var e=Object(u.a)(["\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  margin: 10px;\n  max-width: 100%;\n"]);return v=function(){return e},e}var E=function(){var e=o.a.useState(null),n=Object(i.a)(e,2),t=n[0],r=n[1];return o.a.useEffect((function(){r(Boolean("indexedDB"in window))}),[]),o.a.createElement("p",null,"indexedDB is ",t?"":"not ","supported by the current browser.")},h=function(e){return e.toString().slice(8,-1)},x=s.a.div(v()),w=s.a.div(g(),"#282c34"),k=s.a.div(b(),(function(e){return e.background}),(function(e){return e.color})),j=function(e){var n=e.event;return o.a.createElement(w,null,o.a.createElement(k,{background:h(n).includes("custom")?"goldenrod":"#282c34",color:"#fff"},h(n.target)),o.a.createElement(k,null,h(n)),o.a.createElement(k,{color:"error"===n.type?"red":"green"},n.type))},y=function(){var e=o.a.useState("test-db"),n=Object(i.a)(e,2),t=n[0],r=n[1],a=o.a.useState(1),c=Object(i.a)(a,2),u=c[0],s=c[1],d=o.a.useState([]),f=Object(i.a)(d,2),m=f[0],p=f[1],b=o.a.useRef([]),g=o.a.useCallback((function(){return p(Object(l.a)(b.current))}),[p]),v=o.a.useCallback((function(e){b.current.push(e),g()}),[g]),E=o.a.useState(null),h=Object(i.a)(E,2),w=h[0],k=h[1];o.a.useEffect((function(){w&&(w.onclose=function(e){v(e)},w.onabort=function(e){v(e)},w.onerror=function(e){v(e)},w.onversionchange=function(e){v(e),e.currentTarget.close(),v({type:"close",target:w,toString:function(){return"[object customCloseEvent]"}}),k(null)})}),[w,v]);var y=o.a.useCallback((function(e){e&&e.click()}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,o.a.createElement("input",{placeholder:"database name",value:t,onChange:function(e){return r(e.target.value)}}),o.a.createElement("input",{style:{width:"40px"},placeholder:"version",type:"number",min:1,value:u,onChange:function(e){return s(e.target.value)}}),o.a.createElement("button",{ref:y,onClick:function(e){var n=window.indexedDB.open(t,u);n.addEventListener("success",(function(e){w&&(w.close(),v({type:"close",target:w,toString:function(){return"[object customCloseEvent]"}}),k(null)),k(e.currentTarget.result),v(e)})),n.addEventListener("error",(function(e){v(e)})),n.addEventListener("upgradeneeded",(function(e){v(e);var n=e.target.result;["store A","store B","store C","store D","store E"].forEach((function(e){n.objectStoreNames.contains(e)||n.createObjectStore(e,{keyPath:"id"})}))})),n.addEventListener("blocked",(function(e){v(e),w&&w.close()&&v({type:"close",target:w,toString:function(){return"[object customCloseEvent]"}}),k(null)}))}},"open"),o.a.createElement("button",{onClick:function(e){var n=window.indexedDB.deleteDatabase(t);n.addEventListener("success",(function(e){v(e),k(null)})),n.addEventListener("error",(function(e){v(e)}))}},"delete"),o.a.createElement("button",{onClick:function(){b.current=[],g()}},"clear log")),o.a.createElement(x,null,m.map((function(e,n){return o.a.createElement(j,{key:n,event:e})}))),w&&o.a.createElement(S,null,o.a.createElement("span",null,w.name),o.a.createElement("small",null,"vers. ",w.version)),w&&o.a.createElement(B,{idb:w}))},S=s.a.div(p(),"#282c34"),C=s.a.div(m()),O=s.a.div(f(),(function(e){return e.selected?"gold":"white"}),(function(e){return e.selected?"black":"#282c34"})),B=function(e){var n=e.idb,t=o.a.useMemo((function(){for(var e=[],t=0;t<n.objectStoreNames.length;t++)e.push(n.objectStoreNames[t]);return e}),[n]),r=o.a.useState("store A"),a=Object(i.a)(r,2),c=a[0],l=a[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(C,null,t.map((function(e){return o.a.createElement(O,{key:e,onClick:function(){return l(e)},selected:e===c},e)}))),c&&o.a.createElement(D,{idb:n,store:c}))},D=function(e){var n=e.idb,t=e.store,r=o.a.useState([]),a=Object(i.a)(r,2),c=a[0],u=a[1],s=o.a.useCallback((function(e){return new Promise((function(t,r){n.transaction(e,"readonly").objectStore(e).getAllKeys().onsuccess=function(e){t(Object(l.a)(e.target.result))}})).then((function(t){return new Promise((function(r,o){0===t.length&&r([]);for(var a=[],c=0;c<t.length;c++){n.transaction(e,"readonly").objectStore(e).get(t[c]).onsuccess=function(e){a.push(e.target.result),a.length===t.length&&r(a)}}})).then((function(e){return u(e)}))}))}),[n]);o.a.useEffect((function(){u([])}),[t]),o.a.useEffect((function(){s(t)}),[n,t,s]);return o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){return function(e,t){var r=n.transaction(e,"readwrite"),o=r.objectStore(e).put(t);o.onsuccess=function(){return console.log(o.result)},o.onerror=function(){return console.log(o.result)},r.oncomplete=function(){s(e)}}(t,{id:Math.random().toFixed(2),name:Math.random().toFixed(2)})}},"put"),o.a.createElement("button",{onClick:function(){!function(e){var t=n.transaction(e,"readwrite"),r=t.objectStore(e).clear();r.onsuccess=function(){return console.log(r.result)},r.onerror=function(){return console.log(r.result)},t.oncomplete=function(){s(e)}}(t)}},"clear all"),o.a.createElement(x,null,c.map((function(e){return o.a.createElement(L,{key:e.id,onClick:function(){!function(e,t){var r=n.transaction(e,"readwrite"),o=r.objectStore(e).delete(t);o.onsuccess=function(){return console.log(o.result)},o.onerror=function(){return console.log(o.result)},r.oncomplete=function(){s(e)}}(t,e.id)}},o.a.createElement(A,{item:e}))}))))},L=s.a.div(d(),"#282c34"),A=function(e){var n=e.item;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,n.id),o.a.createElement("div",null,n.name))},F=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},"IndexedDb"),o.a.createElement(E,null),o.a.createElement(y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.43fd819f.chunk.js.map